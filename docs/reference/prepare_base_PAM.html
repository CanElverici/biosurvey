<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Presence-absence matrix (PAM) linked to a spatial grid — prepare_base_PAM • biosurvey</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Presence-absence matrix (PAM) linked to a spatial grid — prepare_base_PAM" />
<meta property="og:description" content="Prepares a presence-absence matrix (PAM) in which all sites
of interest (rows) will have a value for presence or absence of a species
of interest (columns). Initial points of interest will be represented by an
ID, and longitude and latitude coordinates. The PAM will be linked to a
spatial grid." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">biosurvey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/biosurvey_preparing_data.html">biosurvey: Preparing data</a>
    </li>
    <li>
      <a href="../articles/biosurvey_selecting_sites.html">biosurvey: Selecting sampling sites</a>
    </li>
    <li>
      <a href="../articles/biosurvey_selection_with_preselected_sites.html">biosurvey: Selecting sampling sites using preselected points</a>
    </li>
    <li>
      <a href="../articles/biosurvey_testing_module.html">biosurvey: Testing efficiency of selected sites</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/claununez/biosurvey/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Presence-absence matrix (PAM) linked to a spatial grid</h1>
    <small class="dont-index">Source: <a href='https://github.com/claununez/biosurvey/blob/master/R/base_pam.R'><code>R/base_pam.R</code></a></small>
    <div class="hidden name"><code>prepare_base_PAM.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Prepares a presence-absence matrix (PAM) in which all sites
of interest (rows) will have a value for presence or absence of a species
of interest (columns). Initial points of interest will be represented by an
ID, and longitude and latitude coordinates. The PAM will be linked to a
spatial grid.</p>
    </div>

    <pre class="usage"><span class='fu'>prepare_base_PAM</span><span class='op'>(</span><span class='va'>data</span>, format <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='va'>master_matrix</span>, <span class='va'>cell_size</span>,
                 complete_cover <span class='op'>=</span> <span class='cn'>TRUE</span>, clip_grid <span class='op'>=</span> <span class='cn'>FALSE</span>,
                 indices <span class='op'>=</span> <span class='st'>"basic"</span>, parallel <span class='op'>=</span> <span class='cn'>FALSE</span>, n_cores <span class='op'>=</span> <span class='cn'>NULL</span>,
                 verbose <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>species geographic ranges to be used to create a presence-absence
matrix (PAM). This argument can be: character, data.frame, RasterStack,
RasterBrick, list, SpatialPolygonsDataFrame, or SpatialPointsDataFrame. See
details for a description of the characteristics of data for each option.</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>(character) if <code>data</code> is of class character, available
options are: "shp", "gpkg", "geojson", "GTiff", and "ascii".</p></td>
    </tr>
    <tr>
      <th>master_matrix</th>
      <td><p>object of class "master_matrix" or "master_selection".
See details.</p></td>
    </tr>
    <tr>
      <th>cell_size</th>
      <td><p>(numeric) resolution for grid (single number or vector of
two numbers) in kilometers (km).</p></td>
    </tr>
    <tr>
      <th>complete_cover</th>
      <td><p>(logical) whether or not to include cells of grid
partially overlapped with the geographic region of interest contained in
<code>master_matrix</code>. Default = TRUE.</p></td>
    </tr>
    <tr>
      <th>clip_grid</th>
      <td><p>(logical) whether to clip the spatial grid using the region
of interest. Clipping improves visualization but depending on how complex
the region of interest is it could take time to perform this task.</p></td>
    </tr>
    <tr>
      <th>indices</th>
      <td><p>(character) code for indices to be calculated. Basic indices
are calculated all the time, other indices need to be specified. Options are:
"all", "basic, "AB", "BW", "BL", "SCSC", "SCSR", "DF", "CC", "WRN", "SRC",
"CMSC", and "CMSR". Default = "basic". See details.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>(logical) whether to perform analyses in parallel.
Default = FALSE. Not used if data is of class data.frame, RasterStack, or
RasterBrick.</p></td>
    </tr>
    <tr>
      <th>n_cores</th>
      <td><p>(numeric) number of cores to be used when <code>parallel</code> =
TRUE. The default, NULL, uses available cores - 1.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>(logical) whether or not to print messages about the process.
Default = TRUE.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A presence-absence matrix (PAM) of class <code><a href='base_PAM.html'>base_PAM</a></code> for the
region of interest associated with a SpatialPolygonsDataFrame, as in a grid
of <code>cell_size</code> resolution. Each grid cell is related to a specific ID
and longitude and latitude coordinates. Presence (1) and absence (0) values
for each species in every cell of the PAM are included as apart of the
data.frame of the SpatialPolygonsDataFrame. PAM indices is returned with the
basic indices of biodiversity as default, but can be changed using the
argument <code>indices</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Objects of class "master_matrix" or "master_selection" can be obtained from
functions <code><a href='prepare_master_matrix.html'>prepare_master_matrix</a></code>,
<code><a href='random_selection.html'>random_selection</a></code>, <code><a href='uniformG_selection.html'>uniformG_selection</a></code>,
<code><a href='uniformE_selection.html'>uniformE_selection</a></code>, or <code>uniformEG_selection</code>. The element
region or mask if this last is not NULL is used to prepare the spatial grid.</p>
<p>Geographic projection of objects or coordinates involved must be WGS84
(EPSG:4326).</p>
<p>Description of objects to be used as <code>data</code>:</p><ul>
<li><p>character.- name of directory containing raster, shapefiles, geopackage,
or geojson files representing species geographic ranges. Each file must be
named as the species that it represents. All files must be in the same
format.
If files are in raster format, "GTiff" and "ascii" are acceptable extensions;
values in each layer must be 1 (presence) and 0 (absence).</p></li>
<li><p>data.frame.- a table containing  three columns. Columns must be in the
following order: Longitude, Latitude, Species.</p></li>
<li><p>RasterStack or RasterBrick.- Each layer must be named as the species which
range it represents, and values in each layer must be 1 (presence) and 0
(absence).</p></li>
<li><p>list.-  a list of RasterLayers that cannot be stacked because of extent or
resolution differences. Each element of the list must be named as the species
which range it represents, and values in each RasterLayer must be 1
(presence) and 0 (absence).</p></li>
<li><p>SpatialPolygonsDataFrame.- object representing species' geographic ranges.
The data.frame associated with the object must contain a column named
"Species" to distinguish among features representing each species range.</p></li>
<li><p>SpatialPointsDataFrame.- object of spatial points where each record of a
species must be a point. The associated data.frame must contain the
following columns (in that order): Longitude, Latitude, Species.</p></li>
</ul>

<p>A list of codes and indices that can be calculated is described below. For
further details on the way calculations are performed and the meaning of the
indices see Soberon and Cavner (2015)
doi: <a href='https://doi.org/10.17161/bi.v10i0.4801'>10.17161/bi.v10i0.4801</a>
.</p><table class='table'>
<tr><td>Code</td><td>Index</td><td>Calculation</td></tr>
<tr><td>RI</td><td>Richness</td><td>Basic</td></tr>
<tr><td>RA</td><td>Range</td><td>Basic</td></tr>
<tr><td>RIN</td><td>Richness normalized</td><td>Basic</td></tr>
<tr><td>RAN</td><td>Range normalized</td><td>Basic</td></tr>
<tr><td>AB</td><td>Additive Beta</td><td>Needs to be defined</td></tr>
<tr><td>BW</td><td>Beta Whittaker</td><td>Needs to be defined</td></tr>
<tr><td>BL</td><td>Beta Legendre</td><td>Needs to be defined and DF</td></tr>
<tr><td>SCSC</td><td>Schluter covariance sites-composition</td><td>Needs to be defined and CMSC</td></tr>
<tr><td>SCSR</td><td>Schluter covariance species-ranges</td><td>Needs to be defined and CMSR</td></tr>
<tr><td>DF</td><td>Dispersion field</td><td>Needs to be defined</td></tr>
<tr><td>SCC</td><td>Shared community composition</td><td>Needs to be defined</td></tr>
<tr><td>WRN</td><td>Wright-Reeves nestedness</td><td>Needs to be defined, BW, and DF</td></tr>
<tr><td>SRC</td><td>Stone-Roberts C-score</td><td>Needs to be defined and DF</td></tr>
<tr><td>CMSC</td><td>Covariance matrix sites-composition</td><td>Needs to be defined, DF, and BW</td></tr>
<tr><td>CMSR</td><td>Covariance matrix species-ranges</td><td>Needs to be defined, SCC, and BW</td></tr>
<tr><td>MCC</td><td>Mean composition covariance</td><td>Calculated with CMSC</td></tr>
<tr><td>MRC</td><td>Mean range covariance</td><td>Calculated with CMSR</td></tr>
</table>


    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='PAM_indices.html'>PAM_indices</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"m_matrix"</span>, package <span class='op'>=</span> <span class='st'>"biosurvey"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"species_data"</span>, package <span class='op'>=</span> <span class='st'>"biosurvey"</span><span class='op'>)</span>

<span class='co'># Create base_PAM</span>
<span class='va'>b_pam</span> <span class='op'>&lt;-</span> <span class='fu'>prepare_base_PAM</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>species_data</span>, master_matrix <span class='op'>=</span> <span class='va'>m_matrix</span>,
                          cell_size <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Preparing spatial grid</span></div><div class='output co'>#&gt; <span class='warning'>Warning: CRS object has comment, which is lost in output</span></div><div class='output co'>#&gt; <span class='warning'>Warning: CRS object has comment, which is lost in output</span></div><div class='output co'>#&gt; <span class='message'>Preprocessing 'data'</span></div><div class='output co'>#&gt;   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   4%  |                                                                              |======                                                                |   8%  |                                                                              |=========                                                             |  12%  |                                                                              |============                                                          |  17%  |                                                                              |===============                                                       |  21%  |                                                                              |==================                                                    |  25%  |                                                                              |====================                                                  |  29%  |                                                                              |=======================                                               |  33%  |                                                                              |==========================                                            |  38%  |                                                                              |=============================                                         |  42%  |                                                                              |================================                                      |  46%  |                                                                              |===================================                                   |  50%  |                                                                              |======================================                                |  54%  |                                                                              |=========================================                             |  58%  |                                                                              |============================================                          |  62%  |                                                                              |===============================================                       |  67%  |                                                                              |==================================================                    |  71%  |                                                                              |====================================================                  |  75%  |                                                                              |=======================================================               |  79%  |                                                                              |==========================================================            |  83%  |                                                                              |=============================================================         |  88%  |                                                                              |================================================================      |  92%  |                                                                              |===================================================================   |  96%  |                                                                              |======================================================================| 100%</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Preparing PAM from information</span></div><div class='output co'>#&gt; <span class='message'>Calculating PAM indices</span></div><div class='input'><span class='fu'>sp</span><span class='fu'>::</span><span class='fu'>plot</span><span class='op'>(</span><span class='va'>b_pam</span><span class='op'>$</span><span class='va'>PAM</span><span class='op'>)</span>
</div><div class='img'><img src='prepare_base_PAM-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='summary.html'>summary</a></span><span class='op'>(</span><span class='va'>b_pam</span><span class='op'>$</span><span class='va'>PAM</span><span class='op'>@</span><span class='va'>data</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>6</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt;        ID          Longitude          Latitude       Species_1     
#&gt;  Min.   : 86.0   Min.   :-117.44   Min.   :15.62   Min.   :0.0000  
#&gt;  1st Qu.:285.2   1st Qu.:-108.59   1st Qu.:20.14   1st Qu.:0.0000  
#&gt;  Median :450.5   Median :-103.67   Median :24.65   Median :0.0000  
#&gt;  Mean   :467.9   Mean   :-103.09   Mean   :24.18   Mean   :0.3007  
#&gt;  3rd Qu.:657.8   3rd Qu.: -98.01   3rd Qu.:28.26   3rd Qu.:1.0000  
#&gt;  Max.   :851.0   Max.   : -86.94   Max.   :32.78   Max.   :1.0000  
#&gt;    Species_2         Species_3      
#&gt;  Min.   :0.00000   Min.   :0.00000  
#&gt;  1st Qu.:0.00000   1st Qu.:0.00000  
#&gt;  Median :0.00000   Median :0.00000  
#&gt;  Mean   :0.06863   Mean   :0.01634  
#&gt;  3rd Qu.:0.00000   3rd Qu.:0.00000  
#&gt;  Max.   :1.00000   Max.   :1.00000  </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Claudia Nuñez-Penichet, Marlon E. Cobos, Jorge Soberón, Tomer Gueta, Narayani Barve, Vijay Barve, Adolfo G. Navarro-Sigüenza, A. Townsend Peterson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Prepare a base object to perform further analyses — prepare_master_matrix • biosurvey</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Prepare a base object to perform further analyses — prepare_master_matrix" />
<meta property="og:description" content="prepare an S3 object that will serve as the base to perform all
further analyses. This object will contain geographic and environmental
information that will be used to characterize the region of interest." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">biosurvey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/biosurvey_preparing_data.html">biosurvey: Preparing data</a>
    </li>
    <li>
      <a href="../articles/biosurvey_selecting_sites.html">biosurvey: Selecting sampling sites</a>
    </li>
    <li>
      <a href="../articles/biosurvey_selection_with_preselected_sites.html">biosurvey: Selecting sampling sites using preselected points</a>
    </li>
    <li>
      <a href="../articles/biosurvey_testing_module.html">biosurvey: Testing efficiency of selected sites</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/claununez/biosurvey/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prepare a base object to perform further analyses</h1>
    <small class="dont-index">Source: <a href='https://github.com/claununez/biosurvey/blob/master/R/master_matrix.R'><code>R/master_matrix.R</code></a></small>
    <div class="hidden name"><code>prepare_master_matrix.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>prepare an S3 object that will serve as the base to perform all
further analyses. This object will contain geographic and environmental
information that will be used to characterize the region of interest.</p>
    </div>

    <pre class="usage"><span class='fu'>prepare_master_matrix</span><span class='op'>(</span><span class='va'>region</span>, <span class='va'>variables</span>, mask <span class='op'>=</span> <span class='cn'>NULL</span>,
                      preselected_sites <span class='op'>=</span> <span class='cn'>NULL</span>, do_pca <span class='op'>=</span> <span class='cn'>FALSE</span>,
                      center <span class='op'>=</span> <span class='cn'>TRUE</span>, scale <span class='op'>=</span> <span class='cn'>FALSE</span>,
                      variables_in_matrix <span class='op'>=</span> <span class='cn'>NULL</span>, verbose <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>region</th>
      <td><p>SpatialPolygons* of the region of interest; for instance,
a country, another type of administrative are, or a protected area.</p></td>
    </tr>
    <tr>
      <th>variables</th>
      <td><p>RasterStack or RasterBrick of environmental variables.</p></td>
    </tr>
    <tr>
      <th>mask</th>
      <td><p>(optional) SpatialPolygons* object to mask <code>variables</code> and
reduce <code>region</code> to an area that is more relevant for analysis (e.g.,
only areas with natural vegetation cover). Default = NULL.</p></td>
    </tr>
    <tr>
      <th>preselected_sites</th>
      <td><p>data.frame containing sites that must be included
in posterior selections of sites for the survey system. Columns must be:
"Sites", "Longitude", "Latitude", in that order.</p></td>
    </tr>
    <tr>
      <th>do_pca</th>
      <td><p>(logical) whether or not to perform a principal component
analysis. Default = FALSE.</p></td>
    </tr>
    <tr>
      <th>center</th>
      <td><p>(logical) whether or not to center variables. Argument to be
passed to the function <code><a href='https://rdrr.io/r/stats/prcomp.html'>prcomp</a></code>. Default = TRUE.</p></td>
    </tr>
    <tr>
      <th>scale</th>
      <td><p>(logical) whether or not to scale the variables. Recommended
when variables are in different units. Argument to be passed to the function
<code><a href='https://rdrr.io/r/stats/prcomp.html'>prcomp</a></code>. Default = FALSE.</p></td>
    </tr>
    <tr>
      <th>variables_in_matrix</th>
      <td><p>(character) name of variables to include in
matrix. If NULL (the default) all variables will be included.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>(logical) whether or not to print messages about the process.
Default = TRUE.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An S3 object of class <code><a href='master_matrix.html'>master_matrix</a></code> containing the following
elements:</p><ul>
<li><p>data_matrix: a date.frame with information about geographic location of
raster cells, initial environmental data, and if <code>do_pca</code> is TRUE,
the first two principal components derived from original data.</p></li>
<li><p>region: a SpatialPolygons* representing the region of interest.</p></li>
<li><p>mask: SpatialPolygons* object used. NULL if <code>mask</code> was not defined.</p></li>
<li><p>preselected_sites: sites defined by used. NULL if <code>preselected_sites</code>
was not defined.</p></li>
<li><p>raster_base: a RasterLayer representing the raster masked to region or
mask, which will be used for plotting purposes.</p></li>
<li><p>PCA_results: if <code>do_pca</code> is TRUE, other results from principal
component analysis. If FALSE, PCA_results element of the object is NULL.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function helps in preparing all data as needed for further analyses
aiming to define a survey sampling system considering geographic and
environmental spaces in the <code>region</code> of interest.</p>
<p>If <code>mask</code> is defined all analyses will be restricted to such an area.
If <code>mask</code> is not fully contained by <code>region</code>, the mask used for
reducing <code>variables</code>, and returned as part of the S3 object
(master_matrix) is the intersection between them.</p>
<p>If <code>preselected_sites</code> is defined, environmental values and, if
<code>do_pca</code> = TRUE, principal components are added to such records. These
records and their characteristics will be considered in further analyses.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"mx"</span>, package <span class='op'>=</span> <span class='st'>"biosurvey"</span><span class='op'>)</span>
<span class='va'>variables</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/stack.html'>stack</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata/variables.tif"</span>,
                                       package <span class='op'>=</span> <span class='st'>"biosurvey"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Create master matrix object</span>
<span class='va'>m_matrix</span> <span class='op'>&lt;-</span> <span class='fu'>prepare_master_matrix</span><span class='op'>(</span>region <span class='op'>=</span> <span class='va'>mx</span>, variables <span class='op'>=</span> <span class='va'>variables</span>,
                                  do_pca <span class='op'>=</span> <span class='cn'>TRUE</span>, center <span class='op'>=</span> <span class='cn'>TRUE</span>, scale <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Processing raster layers, please wait...</span></div><div class='output co'>#&gt; <span class='message'>Performing PCA analysis</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Claudia Nuñez-Penichet, Marlon E. Cobos, Jorge Soberón, Tomer Gueta, Narayani Barve, Vijay Barve, Adolfo G. Navarro-Sigüenza, A. Townsend Peterson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


